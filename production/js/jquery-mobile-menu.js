!function(s){"use strict";s.fn.mobileMenu=function(e){var i={MenuWidth:250,SlideSpeed:300,WindowsMaxWidth:767,PagePush:!0,FromLeft:!0,Overlay:!0,CollapseMenu:!0,ClassName:"mobile-menu"};return this.each(function(){function n(){var e=0,i=s(document).height();return d.find("."+C+" > li").each(function(){var i=s(this).height();e+=i}),i>=e&&(e=i),e}function a(e){f=s("."+C+" span.expand").height(),1===e&&d.find("."+C+" > li:has(span)").each(function(){var e=s(this).height(),i=(e-f)/2;s(this).find("span").css({"padding-bottom":i,"padding-top":i})}),2===e&&d.find("."+C+" > li > ul > li:has(span)").each(function(){var e=s(this).height(),i=(e-f)/2;s(this).find("span").css({"padding-bottom":i,"padding-top":i})})}function l(){h.addClass("mmPushBody"),1==o.Overlay?c.addClass("overlay"):c.addClass("overlay").css("opacity",0),d.css({display:"block",overflow:"hidden"}),1==o.FromLeft?(1==o.PagePush&&u.animate({left:o.MenuWidth},o.SlideSpeed,"linear"),d.animate({left:"0"},o.SlideSpeed,"linear",function(){d.css("height",n()),p=!0})):(1==o.PagePush&&u.animate({left:-o.MenuWidth},o.SlideSpeed,"linear"),d.animate({right:"0"},o.SlideSpeed,"linear",function(){d.css("height",n()),p=!0})),r||(a(1),r=!0)}function t(){1==o.FromLeft?(1==o.PagePush&&u.animate({left:"0"},o.SlideSpeed,"linear"),d.animate({left:-o.MenuWidth},o.SlideSpeed,"linear",function(){h.removeClass("mmPushBody"),c.css("height",0).removeClass("overlay"),d.css("display","none"),p=!1})):(1==o.PagePush&&u.animate({left:"0"},o.SlideSpeed,"linear"),d.animate({right:-o.MenuWidth},o.SlideSpeed,"linear",function(){h.removeClass("mmPushBody"),c.css("height",0).removeClass("overlay"),d.css("display","none"),p=!1}))}var o=s.extend({},i,e),d=s(this),c=s("#overlay"),h=s("body"),u=s("#page"),p=!1,r=!1,m=!1,f=0,C="";(function(){1==o.FromLeft?d.css("left",-o.MenuWidth):d.css("right",-o.MenuWidth),d.find("ul:first").addClass(o.ClassName),C=o.ClassName,d.css("width",o.MenuWidth),d.find("."+C+" ul").css("display","none");d.find("li ul").parent().prepend('<span class="expand icon-plus"></span>'),s("."+C).append('<li style="height: 30px;"></li>'),s("."+C+" li:has(span)").each(function(){s(this).find("a:first").css("padding-right",55)})})(),s(".mm-toggle").click(function(){d.css("height",s(document).height()),1==o.Overlay&&c.css("height",s(document).height()),p?t():l()}),s(window).resize(function(){s(window).width()>=o.WindowsMaxWidth&&p&&d.css("left")!=-o.MenuWidth&&t()}),s("."+C+" > li > span.expand").click(function(){if(1==o.CollapseMenu){var e=s("."+C+" li span");e.hasClass("open")&&"none"===s(this).next().next().css("display")&&(s("."+C+" li ul").slideUp(),e.hasClass("open")?e.removeClass("icon-minus").addClass("icon-plus"):e.removeClass("icon-plus").addClass("icon-minus"),e.removeClass("open"))}s(this).nextAll("."+C+" ul").slideToggle(function(){1==o.CollapseMenu?s(this).promise().done(function(){d.css("height",n())}):d.css("height",n())}),s(this).hasClass("icon-plus")?s(this).removeClass("icon-plus").addClass("icon-minus"):s(this).removeClass("icon-minus").addClass("icon-plus"),s(this).toggleClass("open"),m||(a(2),m=!0)}),s("."+C+" > li > ul > li > span.expand").click(function(){if(1==o.CollapseMenu){var e=s("."+C+" li ul li span");e.hasClass("open")&&"none"===s(this).next().next().css("display")&&(s("."+C+" li ul ul").slideUp(),e.hasClass("open")?e.removeClass("icon-minus").addClass("icon-plus"):e.removeClass("icon-plus").addClass("icon-minus"),e.removeClass("open"))}s(this).nextAll("."+C+" ul ul").slideToggle(function(){1==o.CollapseMenu?s(this).promise().done(function(){d.css("height",n())}):d.css("height",n())}),s(this).hasClass("icon-plus")?s(this).removeClass("icon-plus").addClass("icon-minus"):s(this).removeClass("icon-minus").addClass("icon-plus"),s(this).toggleClass("open")}),s("."+C+" li a").click(function(){s("."+C+" li a").removeClass("active"),s(this).addClass("active"),t()}),c.click(function(){t()}),s("."+C+" li a.active").parent().children(".expand").removeClass("icon-plus").addClass("icon-minus open"),s("."+C+" li a.active").parent().children("ul").css("display","block")})}}(jQuery);